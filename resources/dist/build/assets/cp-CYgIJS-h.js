const x=window.Vue,{BaseTransition:z,BaseTransitionPropsValidators:G,Comment:q,DeprecationTypes:$,EffectScope:K,ErrorCodes:W,ErrorTypeStrings:Q,Fragment:P,KeepAlive:J,ReactiveEffect:X,Static:Y,Suspense:Z,Teleport:ee,Text:te,TrackOpTypes:oe,Transition:ae,TransitionGroup:re,TriggerOpTypes:ne,VueElement:ie,__esModule:le,assertNumber:se,callWithAsyncErrorHandling:de,callWithErrorHandling:ue,camelize:ce,capitalize:pe,cloneVNode:me,compatUtils:fe,compile:ge,computed:Se,createApp:Ce,createBlock:y,createCommentVNode:D,createElementBlock:f,createElementVNode:ve,createHydrationRenderer:he,createPropsRestProxy:be,createRenderer:ye,createSSRApp:Pe,createSlots:Te,createStaticVNode:we,createTextVNode:i,createVNode:o,customRef:Re,defineAsyncComponent:ke,defineComponent:_e,defineCustomElement:xe,defineEmits:De,defineExpose:Me,defineModel:Ie,defineOptions:Ae,defineProps:Le,defineSSRCustomElement:Ee,defineSlots:He,devtools:Fe,effect:Ve,effectScope:Oe,getCurrentInstance:Be,getCurrentScope:Ne,getCurrentWatcher:Ue,getTransitionRawChildren:je,guardReactiveProps:ze,h:Ge,handleError:qe,hasInjectionContext:$e,hydrate:Ke,hydrateOnIdle:We,hydrateOnInteraction:Qe,hydrateOnMediaQuery:Je,hydrateOnVisible:Xe,initCustomFormatter:Ye,initDirectivesForSSR:Ze,inject:et,isMemoSame:tt,isProxy:ot,isReactive:at,isReadonly:rt,isRef:nt,isRuntimeOnly:it,isShallow:lt,isVNode:st,markRaw:dt,mergeDefaults:ut,mergeModels:ct,mergeProps:pt,nextTick:mt,nodeOps:ft,normalizeClass:gt,normalizeProps:St,normalizeStyle:Ct,onActivated:vt,onBeforeMount:ht,onBeforeUnmount:bt,onBeforeUpdate:yt,onDeactivated:Pt,onErrorCaptured:Tt,onMounted:M,onRenderTracked:wt,onRenderTriggered:Rt,onScopeDispose:kt,onServerPrefetch:_t,onUnmounted:xt,onUpdated:Dt,onWatcherCleanup:Mt,openBlock:u,patchProp:It,popScopeId:At,provide:Lt,proxyRefs:Et,pushScopeId:Ht,queuePostFlushCb:Ft,reactive:Vt,readonly:Ot,ref:h,registerRuntimeCompiler:Bt,render:Nt,renderList:w,renderSlot:Ut,resolveComponent:jt,resolveDirective:zt,resolveDynamicComponent:Gt,resolveFilter:qt,resolveTransitionHooks:$t,setBlockTracking:Kt,setDevtoolsHook:Wt,setTransitionHooks:Qt,shallowReactive:Jt,shallowReadonly:Xt,shallowRef:Yt,ssrContextKey:Zt,ssrUtils:eo,stop:to,toDisplayString:l,toHandlerKey:oo,toHandlers:ao,toRaw:ro,toRef:no,toRefs:io,toValue:lo,transformVNodeArgs:so,triggerRef:uo,unref:e,useAttrs:co,useCssModule:po,useCssVars:mo,useHost:fo,useId:go,useModel:So,useSSRContext:Co,useShadowRoot:vo,useSlots:ho,useTemplateRef:I,useTransitionState:bo,vModelCheckbox:yo,vModelDynamic:Po,vModelRadio:To,vModelSelect:wo,vModelText:Ro,vShow:ko,version:_o,warn:xo,watch:Do,watchEffect:Mo,watchPostEffect:Io,watchSyncEffect:Ao,withAsyncContext:Lo,withCtx:a,withDefaults:Eo,withDirectives:Ho,withKeys:Fo,withMemo:Vo,withModifiers:Oo,withScopeId:Bo}=x,{Alert:No,AuthCard:Uo,Avatar:jo,Badge:R,Button:_,ButtonGroup:zo,Calendar:Go,Card:A,CardList:qo,CardListItem:$o,CardPanel:Ko,CharacterCounter:Wo,Checkbox:Qo,CheckboxGroup:Jo,CodeEditor:Xo,Combobox:Yo,CommandPaletteItem:Zo,ConfirmationModal:ea,Context:ta,ContextFooter:oa,ContextHeader:aa,ContextItem:ra,ContextLabel:na,ContextMenu:ia,ContextSeparator:la,CreateForm:sa,DatePicker:da,DateRangePicker:ua,Description:ca,DocsCallout:pa,DragHandle:ma,Dropdown:fa,DropdownItem:ga,DropdownLabel:Sa,DropdownMenu:Ca,DropdownSeparator:va,DropdownFooter:ha,DropdownHeader:ba,Editable:ya,ErrorMessage:Pa,EmptyStateItem:Ta,EmptyStateMenu:wa,Field:Ra,Header:L,Heading:ka,HoverCard:_a,Icon:xa,Input:Da,InputGroup:Ma,InputGroupAppend:Ia,InputGroupPrepend:Aa,Label:La,Listing:Ea,ListingCustomizeColumns:Ha,ListingFilters:Fa,ListingHeaderCell:Va,ListingPagination:Oa,ListingPresets:Ba,ListingPresetTrigger:Na,ListingRowActions:Ua,ListingSearch:ja,ListingTable:za,ListingTableBody:Ga,ListingTableHead:qa,ListingToggleAll:$a,LivePreview:Ka,LivePreviewPopout:Wa,Modal:Qa,ModalClose:Ja,ModalTitle:Xa,Pagination:E,Panel:Ya,PanelFooter:Za,PanelHeader:er,Popover:tr,PublishComponents:or,PublishContainer:H,publishContextKey:ar,injectPublishContext:rr,PublishField:nr,PublishFields:ir,PublishFieldsProvider:lr,PublishForm:sr,PublishLocalizations:dr,PublishSections:ur,PublishTabs:F,Radio:cr,RadioGroup:pr,Select:mr,Separator:fr,Slider:gr,Skeleton:Sr,SplitterGroup:Cr,SplitterPanel:vr,SplitterResizeHandle:hr,StatusIndicator:br,Subheading:yr,Switch:Pr,TabContent:Tr,Stack:wr,StackClose:Rr,StackHeader:kr,StackFooter:_r,StackContent:xr,Table:V,TableCell:s,TableColumn:Dr,TableColumns:Mr,TableRow:k,TableRows:Ir,TabList:Ar,TabProvider:Lr,Tabs:Er,TabTrigger:Hr,Textarea:Fr,TimePicker:Vr,ToggleGroup:Or,ToggleItem:Br,Widget:Nr,registerIconSet:Ur,registerIconSetFromStrings:jr}=__STATAMIC__.ui,{AfterSaveHooks:zr,BeforeSaveHooks:Gr,Pipeline:O,PipelineStopped:qr,Request:B}=__STATAMIC__.savePipeline,N={__name:"DetourForm",props:{action:{type:String,required:!0},blueprint:{type:Object,required:!0},meta:{type:Object,required:!0},values:{type:Object,default:()=>({})}},emits:["saved"],setup(n,{emit:c}){const g=c,b=Statamic.$slug.separatedBy("_").create("detour-form"),S=I("container"),C=h({}),v=h(!1),p=h(n.values),t=()=>{new O().provide({container:S,errors:C,saving:v}).through([new B(n.action,"post")]).then(d=>{Statamic.$toast.success(__("Saved")),g("saved",d.data),p.value={}})};return(d,r)=>(u(),f(P,null,[o(e(L),{title:d.__("Add Detour"),icon:"link"},{default:a(()=>[o(e(_),{variant:"primary",text:d.__("Save"),onClick:t,disabled:v.value},null,8,["text","disabled"])]),_:1},8,["title"]),o(e(H),{ref_key:"container",ref:S,name:e(b),blueprint:n.blueprint,meta:n.meta,errors:C.value,modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=m=>p.value=m)},{default:a(()=>[o(e(F))]),_:1},8,["name","blueprint","meta","errors","modelValue"])],64))}},U={key:0,class:"mt-4"},j={__name:"Detours",props:{action:{type:String,required:!0},blueprint:{type:Object,required:!0},meta:{type:Object,required:!0},values:{type:Object,default:()=>({})},data:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},paginatorMeta:{type:Object,default:null},perPage:{type:Number,default:15},indexUrl:{type:String,default:""}},setup(n){const c=h([]);M(()=>{c.value=n.items??[]});const g=(t,d)=>{const r=new URL(n.indexUrl,window.location.origin);return r.searchParams.set("size",d),r.searchParams.set("page",t),r.toString()},b=t=>{window.location.href=g(t,n.perPage)},S=t=>{window.location.href=g(1,t)},C=t=>{c.value.push(t)},v=t=>{const d=c.value.findIndex(r=>r.id===t);c.value.splice(d,1)},p=t=>{const d=cp_url("/detours/"+t);Statamic.$axios.delete(d).then(()=>v(t))};return(t,d)=>(u(),f("div",null,[o(N,{action:n.action,blueprint:n.blueprint,meta:n.meta,values:n.values,onSaved:C},null,8,["action","blueprint","meta","values"]),o(e(A),null,{default:a(()=>[o(e(V),{class:"mt-6 min-w-full"},{default:a(()=>[o(e(k),null,{default:a(()=>[o(e(s),{class:"font-semibold"},{default:a(()=>[i(l(t.__("From")),1)]),_:1}),o(e(s),{class:"font-semibold"},{default:a(()=>[i(l(t.__("To")),1)]),_:1}),o(e(s),{class:"font-semibold"},{default:a(()=>[i(l(t.__("Type")),1)]),_:1}),o(e(s),{class:"font-semibold"},{default:a(()=>[i(l(t.__("Code")),1)]),_:1}),o(e(s),{class:"font-semibold"},{default:a(()=>[i(l(t.__("Sites")),1)]),_:1}),o(e(s),{class:"text-right font-semibold"},{default:a(()=>[i(l(t.__("Delete")),1)]),_:1})]),_:1}),(u(!0),f(P,null,w(c.value,r=>(u(),y(e(k),{key:r.id,class:"hover:bg-gray-50"},{default:a(()=>[o(e(s),null,{default:a(()=>[i(l(r.from),1)]),_:2},1024),o(e(s),null,{default:a(()=>[i(l(r.to),1)]),_:2},1024),o(e(s),null,{default:a(()=>[i(l(r.type),1)]),_:2},1024),o(e(s),{class:"font-medium"},{default:a(()=>[i(l(r.code),1)]),_:2},1024),o(e(s),{class:"space-x-2"},{default:a(()=>{var m;return[((m=r.sites)==null?void 0:m.length)===0?(u(),y(e(R),{key:0,color:"green"},{default:a(()=>[i(l(t.__("All")),1)]),_:1})):(u(!0),f(P,{key:1},w(r.sites,T=>(u(),y(e(R),{key:T,color:"green"},{default:a(()=>[i(l(T),1)]),_:2},1024))),128))]}),_:2},1024),o(e(s),{class:"text-right"},{default:a(()=>[o(e(_),{variant:"danger",size:"sm",text:t.__("Delete"),onClick:m=>p(r.id)},null,8,["text","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),n.paginatorMeta?(u(),f("div",U,[o(e(E),{"resource-meta":n.paginatorMeta,"per-page":n.perPage,onPageSelected:b,onPerPageChanged:S},null,8,["resource-meta","per-page"])])):D("",!0)]))}};Statamic.booting(()=>{Statamic.$components.register("Detours",j)});
